{{> package-header package}}

<div class="tablet-width container">

  {{#unless user}}
    <p class="notice please-log-in">
      To configure access to this package, please <a href="/login">log in</a>.
    </p>
  {{/unless}}

  {{#if package.scoped}}
    <div class="centered">
      <input
        type="checkbox"
        class="toggle"
        id="package-access-toggle"
        value="private"
        {{#unless userHasWriteAccessToPackage}}disabled="disabled"{{/unless}}
        {{#if package.private}}checked="checked"{{/if}} >
      <label for="package-access-toggle"><span></span></label>
    </div>
  {{/if}}

  <p class="error" style="display:none"></p>

  <table
    class="ruled humans"
    id="collaborators"
    data-enable-permission-togglers="{{enablePermissionTogglers}}"
    data-enable-deletion="{{userHasWriteAccessToPackage}}"
  >
    <thead>
      <tr>
        <th>&nbsp;</th>
        <th>User</th>
        <th>Access</th>
        <th>Revoke</th>
      </tr>
    </thead>
    <tbody>

      {{#each package.collaborators}}
        {{> collaborator}}
      {{/each}}

      {{#if userHasWriteAccessToPackage}}
        <tr>
          <td>
            &nbsp;
          </td>
          <td colspan="1">
            <form id="add-collaborator" method="PUT" action="/package/{{package.name}}/collaborators">
              <input type="hidden" name="permissions" value="{{#if package.private}}read{{else}}write{{/if}}">
              <input type="text" name="name" required="required" value="" placeholder="Add a collaborator...">
            </form>
          </td>
        </tr>
      {{/if}}

    </tbody>
  </table>

</div>
